#!/bin/bash

echo "WIP"

# POSE2
poses=("'a1': -0.53872770071, 'a2': 0.693855702877, 'a3': 0.98034965992, 'a4': -1.76744031906, 'a5': 0.396730571985, 'a6': 0.716458439827, 'a7': 1.98043048382"
        "'a1': -0.687347829342, 'a2': 0.534081995487, 'a3': 0.980247974396, 'a4': -1.70972633362, 'a5': 0.662657082081, 'a6': 0.978414297104, 'a7': 1.81255102158"
        "'a1': -1.18451571465, 'a2': 0.418714255095, 'a3': 1.09116625786, 'a4': -2.09255599976, 'a5': 0.631329476833, 'a6': 1.18814766407, 'a7': 0.898143291473"
        "'a1': -0.0515307895839, 'a2': 0.462311983109, 'a3': -0.480679184198, 'a4': -1.79602861404, 'a5': 0.538627147675, 'a6': 1.83653092384, 'a7': 0.0902908891439"
        "'a1': -0.0469636023045, 'a2': 0.623504757881, 'a3': -0.480642616749, 'a4': -1.73064374924, 'a5': 0.141534850001, 'a6': 1.78389191628, 'a7': -0.402731150389"
        "'a1': -0.202858418226, 'a2': 0.534809470177, 'a3': -0.480661302805, 'a4': -1.67242717743, 'a5': -0.26559945941, 'a6': 1.49823784828, 'a7': -0.863100886345"
        "'a1': -0.218424245715, 'a2': 0.714828193188, 'a3': -0.480694264174, 'a4': -1.37896800041, 'a5': -0.338957697153, 'a6': 1.42659258842, 'a7': -1.18167614937"
        "'a1': -0.156312584877, 'a2': 0.705487549305, 'a3': -0.534098982811, 'a4': -1.3727915287, 'a5': -0.197706148028, 'a6': 1.04136240482, 'a7': -1.3238568306"
        "'a1': -0.15278442204, 'a2': 0.789834260941, 'a3': -0.534109175205, 'a4': -1.21166682243, 'a5': -0.119016006589, 'a6': 0.9986743927, 'a7': -1.58490371704"
        "'a1': -0.117402143776, 'a2': 0.852440655231, 'a3': -0.534073472023, 'a4': -1.09745383263, 'a5': 0.0397622212768, 'a6': 0.887803137302, 'a7': -2.01558017731"
        "'a1': -0.0867136567831, 'a2': 0.944981694221, 'a3': -0.53416711092, 'a4': -0.960660517216, 'a5': 0.117957465351, 'a6': 0.900630295277, 'a7': -2.12841248512"
        "'a1': -0.0942491590977, 'a2': 0.834500789642, 'a3': -0.534102916718, 'a4': -0.966608285904, 'a5': 0.215929463506, 'a6': 0.819075107574, 'a7': -2.26961874962"
        "'a1': -0.108154691756, 'a2': 0.783453941345, 'a3': -0.534089386463, 'a4': -0.892922997475, 'a5': 0.22690422833, 'a6': 0.857029139996, 'a7': -2.24792742729"
        "'a1': -0.12206274271, 'a2': 0.701933562756, 'a3': -0.534227192402, 'a4': -1.03356730938, 'a5': 0.241072744131, 'a6': 0.79250562191, 'a7': -2.32010936737"
        "'a1': -0.12206274271, 'a2': 0.701933562756, 'a3': -0.534227192402, 'a4': -1.03356730938, 'a5': 0.241072744131, 'a6': 0.79250562191, 'a7': -2.32010936737"
        "'a1': -0.10695040226, 'a2': 0.658508360386, 'a3': -0.534124791622, 'a4': -1.1051119566, 'a5': -0.151445895433, 'a6': 0.90378266573, 'a7': -1.69055497646"
        "'a1': -0.0886408388615, 'a2': 0.583623349667, 'a3': -0.53412592411, 'a4': -1.22238492966, 'a5': -0.281659394503, 'a6': 0.942624866962, 'a7': -1.48953151703"
        "'a1': -0.0756374150515, 'a2': 0.424285471439, 'a3': -0.534114718437, 'a4': -1.44984233379, 'a5': -0.448312491179, 'a6': 0.974161684513, 'a7': -1.26219892502"
        "'a1': -0.0816145464778, 'a2': 0.31362220645, 'a3': -0.534122526646, 'a4': -1.58985090256, 'a5': -0.543457865715, 'a6': 1.00459384918, 'a7': -1.13592553139"
        "'a1': -0.00206464226358, 'a2': 0.172233089805, 'a3': -0.534151852131, 'a4': -1.7483240366, 'a5': -0.635179638863, 'a6': 1.30425059795, 'a7': -0.707184255123"
        "'a1': 0.177040979266, 'a2': 0.141703993082, 'a3': -0.534165084362, 'a4': -1.77960062027, 'a5': -0.550866484642, 'a6': 1.56787204742, 'a7': -0.371961206198"
        "'a1': 0.375012814999, 'a2': 0.0483862496912, 'a3': -0.534196317196, 'a4': -1.86935961246, 'a5': -0.406968176365, 'a6': 1.78161132336, 'a7': 0.00891979876906"
        "'a1': 0.445670723915, 'a2': 0.053870588541, 'a3': -0.534201741219, 'a4': -1.85758948326, 'a5': 0.109357014298, 'a6': 1.89761078358, 'a7': 0.482771068811"
        "'a1': 0.510766685009, 'a2': 0.0842863693833, 'a3': -0.534214496613, 'a4': -1.82915043831, 'a5': 0.295785337687, 'a6': 1.857249856, 'a7': 0.749623060226"
        "'a1': 0.647320330143, 'a2': 0.213331192732, 'a3': -0.534205317497, 'a4': -1.69786024094, 'a5': 0.587920963764, 'a6': 1.73242974281, 'a7': 1.1428681612"
        "'a1': 0.627821207047, 'a2': 0.21416169405, 'a3': -0.534214913845, 'a4': -1.69696378708, 'a5': 0.68981128931, 'a6': 1.60724794865, 'a7': 1.35933482647"
        "'a1': 0.694108486176, 'a2': 0.230660736561, 'a3': -0.534211814404, 'a4': -1.67891216278, 'a5': 0.778923034668, 'a6': 1.44497835636, 'a7': 1.59414076805"
        "'a1': 0.636223614216, 'a2': 0.375485062599, 'a3': -0.534195840359, 'a4': -1.5065819025, 'a5': 0.86974465847, 'a6': 1.3980525732, 'a7': 1.73169004917"
        "'a1': 0.549744427204, 'a2': 0.536766946316, 'a3': -0.534206748009, 'a4': -1.28589224815, 'a5': 0.94490903616, 'a6': 1.30563044548, 'a7': 1.97340166569"
        "'a1': 0.493651181459, 'a2': 0.690372824669, 'a3': -0.534199953079, 'a4': -1.04634702206, 'a5': 0.973734498024, 'a6': 1.26569986343, 'a7': 2.18519973755"
        "'a1': 0.218188747764, 'a2': 0.630931735039, 'a3': -0.534150421619, 'a4': -1.255900383, 'a5': 1.26025366783, 'a6': 1.44043052197, 'a7': 1.82161700726"
        "'a1': 0.00396192492917, 'a2': 0.686092197895, 'a3': -0.534095048904, 'a4': -1.15264320374, 'a5': 1.48563349247, 'a6': 1.71773445606, 'a7': 1.83791291714"
        "'a1': -0.156660482287, 'a2': 0.831933200359, 'a3': -0.534086585045, 'a4': -1.11007547379, 'a5': 1.78881514072, 'a6': 1.95082759857, 'a7': 1.85716331005"
        "'a1': -0.329723060131, 'a2': 0.976385831833, 'a3': -0.534224689007, 'a4': -0.913403630257, 'a5': 1.95917367935, 'a6': 2.09240293503, 'a7': 1.98579788208"
        "'a1': -0.330583631992, 'a2': 1.02808177471, 'a3': -0.534240603447, 'a4': -0.879623711109, 'a5': 1.82552683353, 'a6': 2.05695295334, 'a7': 2.218075037"
        "'a1': -0.564888596535, 'a2': 1.04272818565, 'a3': -0.281091302633, 'a4': -0.892248272896, 'a5': 1.94612932205, 'a6': 2.09267830849, 'a7': 2.2777030468"
        "'a1': -0.332631260157, 'a2': 0.577553629875, 'a3': -0.24047113955, 'a4': -1.45468330383, 'a5': 1.18125748634, 'a6': 1.90578770638, 'a7': 1.43737602234"
        "'a1': -0.363168746233, 'a2': 0.64249587059, 'a3': -0.240475878119, 'a4': -1.43616616726, 'a5': 1.3622045517, 'a6': 2.09243130684, 'a7': 1.4576035738"
)


for jp in "${poses[@]}"
do
    read  -n 1 -p "Go to next pose (y) or stop execution (q) or ignore waypoint (any other) ?" input

    if [ "$input" = "q" ]; then
        exit 1
    elif [ "$input" = "y" ]; then
        #rostopic pub -1 /iiwa/command/JointPosition iiwa_msgs/JointPosition "{'header': {'seq': 0, 'stamp':{'secs': 0, 'nsecs': 0}, 'frame_id': ''}, 'position': {'a1': -1.20, 'a2': 1.092, 'a3': 0.984, 'a4': -1.380, 'a5': 0.675, 'a6': 1.656, 'a7': 1.612}}"
        #rostopic pub -1 /test_topic iiwa_msgs/JointPosition "{'header': {'seq': 0, 'stamp':{'secs': 0, 'nsecs': 0}, 'frame_id': ''}, 'position': {$jp}}"
        rostopic pub -1 /iiwa/command/JointPosition iiwa_msgs/JointPosition "{'header': {'seq': 0, 'stamp':{'secs': 0, 'nsecs': 0}, 'frame_id': ''}, 'position': {$jp}}"
    else
        echo "ignoring waypoint"
    fi

done

echo "Done"
